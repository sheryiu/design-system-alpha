<form class="@container/fieldset">
  <div class="core-fieldset" (click)="onTouched?.()" [formGroup]="form">
    @for (fieldDef of fieldDefs; track fieldDef.key) {
      <div class="core-fieldset__label">
        <label [for]="fieldDef.key">{{ fieldDef.label }}</label>
        <span class="core-fieldset__label__type">{{ fieldDef.fieldType }}</span>
      </div>
      <div class="core-fieldset__input">
        @if (form.controls[fieldDef.key]?.value == null) {
          <div
            class="bg-lunar-green-800 rounded-1 min-h-8 overflow-hidden has-focus-visible:outline has-focus-visible:outline-2 has-focus-visible:outline-primary-500 has-focus-visible:bg-primary-950"
          >
            <span class="text-secondary px-2 py-0.5 leading-8">null</span>
          </div>
        } @else {
          @switch (fieldDef.fieldType) {
            @case ('string') {
            <div
              class="bg-lunar-green-800 rounded-1 w-full min-h-8 overflow-hidden has-focus-visible:outline has-focus-visible:outline-2 has-focus-visible:outline-primary-500 has-focus-visible:bg-primary-950"
            >
              <input
                [id]="fieldDef.key"
                coreInputField
                type="text"
                class="size-full min-h-8 px-2 py-0.5"
                [formControlName]="fieldDef.key"
                (input)="handleInput()"
              />
            </div>
            } @default {
            <div>Unsupported Type</div>
            }
          }
        }
      </div>
    }
  </div>
</form>
