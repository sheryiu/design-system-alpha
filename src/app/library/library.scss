@layer components {
  .core-root-navigation-2 {
    @apply flex flex-col items-center border-r gap-4 z-[100];
    @apply px-2 pt-3 bg-side-content;

    .core-root-tabs {
      @apply grow flex flex-col justify-center items-center gap-2 overflow-auto;

      a {
        @apply size-18 rounded-full flex-col gap-1;
        &[data-active=true] {
          @apply bg-hover text-primary-600 dark:text-primary-500;
        }
        i {
          @apply icon-6 flex-none;
        }
        span {
          @apply text-sm font-medium line-clamp-1;
        }
      }
    }

    .core-root-options {
      @apply border-t flex-none -mx-2 self-stretch;
      @apply flex;
    }
  }

  .core-sectioned-outlet {
    @apply relative block h-full;
    > .core-sectioned-outlet-main {
      @apply size-full transition duration-100 ease-out;
      > * {
      }
      &:has(+ .core-sectioned-outlet-full) {
        @apply opacity-0 scale-[0.98];
      }
    }
    > .core-sectioned-outlet-child-bg {
      @apply -ms-px inset-0 absolute lg:border-l bg-lunar-green-50 dark:bg-lunar-green-950;
      &.core-sectioned-outlet-half {
        @apply lg:left-1/4 xl:left-1/2;
        @apply transition-[left];
      }
      &:has(+ .core-sectioned-outlet-half .core-sectioned-outlet-half) {
        @apply lg:left-0 xl:left-1/4;
      }
    }
    > .core-sectioned-outlet-child {
      @apply absolute inset-0;
      > * {
        @apply inset-0;
      }
      > * > * {
        @apply py-4 sm:pe-4 max-sm:pb-16;
      }
      &:has(> router-outlet:only-child) {
        @apply pointer-events-none;
      }
      // &:not(:has(> router-outlet:only-child)) {
      //   @apply before:opacity-100;
      // }
      &.core-sectioned-outlet-half {
        @apply lg:left-1/4 xl:left-1/2;
        @apply transition-[left];
        &:has(.core-sectioned-outlet-half) {
          @apply lg:left-0 xl:left-1/4;
        }
      }
      &.core-sectioned-outlet-full {
      }
    }
  }

  .core-simple-header {
    @apply overflow-hidden rounded-3 ps-6 pe-3 pt-5 pb-3 flex justify-between items-end -top-6 transition-all;
    @apply bg-lunar-green-100 text-primary-800;
    &[data-stuck=true] {
      @apply -mx-2 rounded-none;
    }
    &[data-color=default] {
      .core-breadcrumbs {
        /** use primary instead of lunar-green */
        @apply text-primary-950 dark:text-primary-200;
      }
    }
    &[data-color=primary] {
      .core-breadcrumbs {
        @apply text-primary-950 dark:text-primary-200;
      }
    }
    &[data-color=accent] {
      .core-breadcrumbs {
        @apply text-accent-950 dark:text-accent-200;
      }
    }
  }

  .core-table {
    @apply block size-full;

    .core-table-body {
      @apply grid;
      grid-template-columns: var(--core-table-columns)
    }

    .core-table-row {
      @apply col-span-full grid grid-cols-subgrid;
      > a {
        @apply col-span-full grid grid-cols-subgrid border-b relative;
        &[data-active=true] {
          @apply bg-hover;
          // @apply bg-gradient-to-r from-hover to-transparent to-50%;
          // @apply before:absolute before:bg-primary-600 before:-left-0.5 before:top-[10%] before:bottom-[10%] before:w-1 before:rounded-full;
        }
      }
    }
    &.core-table--borderless {
      .core-table-row > a {
        @apply border-b-0;
      }
    }

    .core-table-row:last-child {
      > a {
        @apply border-b-0;
      }
    }

    .core-table-header-row {
      @apply col-span-full grid grid-cols-subgrid border-b h-12;
    }

    .core-table-footer-row {
      @apply col-span-full grid grid-cols-1 items-center text-sm text-secondary uppercase h-12;
    }

    .core-table-cell {
      @apply px-4 py-2 truncate line-clamp-1 flex items-center;
    }

    .core-table-header-cell {
      @apply flex;
      > button {
        @apply grow truncate whitespace-nowrap font-medium text-sm mx-0.5 px-3.5 py-4;
        @apply text-primary-800 dark:text-primary-200;
      }
    }
  }

  .core-breadcrumbs {
    @apply min-h-6 flex gap-0.5 items-center text-sm font-display;
  }

  .core-form-submit {
    @apply overflow-hidden sticky bottom-0 flex-none;
  }

  .core-search-input {
    @apply flex items-center justify-between gap-2 transition-colors;
    &[data-popupvisible=true] {
      @apply bg-hover;
    }
  }

  .core-tab-bar {
    @apply block transition-all overflow-hidden pb-2;
    .core-tab-bar-tabs {
      @apply w-full flex gap-1.5 transition-all sticky px-2;
      > button {
        @apply basis-full grow rounded-2 px-1 h-8 truncate;
      }
    }
    &[data-stuck=true] {
      @apply -mx-2;
      .core-tab-bar-tabs {
        @apply px-4;
      }
    }
    &[data-selected]:not([data-selected=""]) {
      .core-tab-bar-tabs {
        @apply before:transition-all before:absolute before:left-[--core-selected-tab-x] before:rounded-2 before:h-8 before:w-[--core-selected-tab-width] before:border before:bg-hover;
      }
    }
  }

  .core-tab-bar-header {
    @apply bg-hover text-primary-700 dark:text-primary-500 text-base font-medium;
    @apply border border-s-0 rounded-e-2 py-1 ps-4 pe-2 min-h-11;
    @apply flex justify-between items-center gap-2;
  }

  .core-image-upload-edit {
    @apply relative;
    .core-image-upload-edit-upload-button {
      @apply size-full p-2 text-secondary;
    }
    .core-image-upload-edit-cancel-button {
      @apply absolute inset-0 p-2 text-red-500 opacity-0 transition-opacity;
      &:hover {
        @apply opacity-100;
      }
    }
    img {
      @apply size-full object-cover;
      &:has(+ button:hover) {
        @apply object-contain;
      }
    }
  }

  .core-rating-edit, .core-rating-display {
    @apply flex flex-wrap select-none;
    .core-rating-star {
      @apply grid place-items-center;
      grid-template-areas: "main";
      > * {
        grid-area: main;
      }
    }
  }

  .core-segmented-options {
    > div {
      @apply flex items-center gap-px px-1 py-1;
    }
    input[type=radio] {
      @apply hidden;
    }
    .core-segmented-options-button {
      @apply text-sm transition-all grow px-1 py-1.5;
      @apply first-of-type:rounded-l-2 last-of-type:rounded-r-2;
      &[data-checked=true] {
        @apply z-10 rounded-2 -mx-1 px-2 py-2 -my-0.5;
      }
    }
  }

  .core-color-edit {
    @apply flex gap-2 items-center;
    .core-color-edit-chip {
      @apply size-4 rounded-full shrink-0;
    }
    .core-color-edit-current {
      @apply size-6 border-2 border-black dark:border-white;
    }
    .core-color-edit-presets {
      @apply flex gap-2 items-center grow shrink-0 w-0 overflow-x-auto;
    }
    .core-color-edit-empty {
      background: conic-gradient(
        #333 0.25turn,
        #bbb 0.25turn 0.5turn,
        #333 0.5turn 0.75turn,
        #bbb 0.75turn
      ) top left / 40% 40% repeat;
    }
    .core-color-edit-selector {
      @apply size-6 relative;
      > input {
        @apply absolute inset-0 size-0 opacity-0;
      }
      > .core-color-edit-chip {
        @apply size-6;
      }
    }
  }

  .core-supplementary-panel {
    @apply bg-deep-glass flex-none px-4 py-2;
    > div {
      @apply flex flex-col @md/supplementary-panel:flex-row-reverse gap-2;
    }
    .core-supplementary-panel-actions {
      @apply flex flex-row @md/supplementary-panel:flex-col flex-wrap gap-2 justify-end;
      @apply @md/supplementary-panel:max-h-18;
      .core-supplementary-panel-action {
        @apply px-4 py-1 min-h-8 rounded-2 grow;
      }
    }
    .core-supplementary-panel-text {
      @apply flex flex-col gap-0.5 grow justify-end text-sm text-secondary;
    }
  }

  .core-linear-progress-display {
    @apply w-full flex items-center gap-1 overflow-hidden;
  }

  .core-global-search-backdrop {
    @apply bg-black/10 dark:bg-black/20 backdrop-blur-lg size-full grid gap-x-6 gap-y-6;
    grid-template-areas: "button input input"
                         "empty results actions";
    grid-template-columns: max-content 1fr;
    grid-template-rows: max-content 1fr;
  }

  .core-dirty-bar {
    @apply absolute bottom-0 left-0 right-0 z-[100] py-4 px-6;
    @apply border-t dark:bg-primary-600 dark:text-primary-950;
    @apply flex justify-between items-center;
    .core-dirty-bar__now-editing {
      @apply flex flex-col;
      p {
        @apply font-bold tracking-tighter;
      }
      h3 {
        @apply dark:text-primary-900;
      }
    }
    .core-dirty-bar__actions {
      @apply flex gap-2;
      button {
        @apply p-2 rounded-1;
      }
    }
  }

  .core-fieldset {
    @apply grid grid-cols-1 @md/fieldset:grid-cols-2;
    .core-fieldset__label {
      @apply flex justify-between items-center;
      @apply py-2 ps-4 pe-2;
    }
    .core-fieldset__label__type {
      @apply text-sm uppercase font-medium text-primary-800 dark:text-primary-200;
    }
    .core-fieldset__input {
      @apply flex justify-start items-center;
      @apply py-2 px-2;
    }
  }
}